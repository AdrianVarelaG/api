
Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-9bkvt[0m
{"level":"info","ts":1590441106.271243,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1590441106.275502,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-mx6r9[0m
{"level":"info","ts":1590441109.7531433,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1590441109.7539997,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-beethub-api-master-release-7wwmm-zw5tl[0m
{"level":"info","ts":1590441120.397742,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1590441120.7096858,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/beethub/api.git @ v0.0.17 in path /workspace/source"}

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:d854822e1fffeb270d1aec7c88b19d2eabef5954
WARNING: no SHAs to merge, falling back to initial cloned commit

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-setup-jx-git-credentials[0m
Generated Git credentials file /workspace/xdg_config/git/credentials

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npmrc-ts[0m
Command "credential" is deprecated, it will be removed on Jun 1 2020.  This is replaced by Tekton's mounted secrets
WARNING: failed to find Secret npm-token in namespace **

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-install-ts[0m

> chromedriver@81.0.0 install /workspace/source/node_modules/chromedriver
> node install.js

Current existing ChromeDriver binary is unavailable, proceeding with download and extraction.
Downloading from file:  https://chromedriver.storage.googleapis.com/81.0.4044.69/chromedriver_linux64.zip
Saving to file: /tmp/81.0.4044.69/chromedriver/chromedriver_linux64.zip
Received 1040K...
Received 2080K...
Received 3120K...
Received 4160K...
Received 4840K total.
Extracting zip contents.
Copying to target path /workspace/source/node_modules/chromedriver/lib/chromedriver
Fixing file permissions.
Done. ChromeDriver binary available at /workspace/source/node_modules/chromedriver/lib/chromedriver/chromedriver

> core-js@3.6.5 postinstall /workspace/source/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e)**"


> core-js@2.6.11 postinstall /workspace/source/node_modules/fbjs/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e)**"


> @apollo/protobufjs@1.0.3 postinstall /workspace/source/node_modules/@apollo/protobufjs
> node scripts/postinstall


> nodemon@2.0.3 postinstall /workspace/source/node_modules/nodemon
> node bin/postinstall || exit 0

[32mLove nodemon? You can now support the project via the open collective:[22m[39m
 > [96m[1mhttps://opencollective.com/nodemon/donate[0m

npm WARN api@1.0.0 No repository field.
npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.2 (node_modules/fsevents):
npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.2: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})

added 885 packages from 600 contributors and audited 890 packages in 20.136s
found 0 vulnerabilities


Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-test-ts[0m

> api@1.0.0 test /workspace/source
> echo "DEBUG: no test specified" && exit 0

DEBUG: no test specified

Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-build-transpile-ts-to-js[0m

> api@1.0.0 build /workspace/source
> tsc && npm run copy-static-assets


> api@1.0.0 copy-static-assets /workspace/source
> ts-node copyStaticAssets.ts


Showing logs for build [32mbeethub-api-master-release-7wwmm-18-xxt2b[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build-ts[0m
[36mINFO[0m[0000] Downloading base image node:10-slim          
2020/05/25 21:12:39 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0000] Error while retrieving image from cache: getting file info: stat /workspace/sha256:9dbec6887681e5f3d86d2a49580dc6b7d2e611003b53c88f2ba865052d5e5aba: no such file or directory 
[36mINFO[0m[0000] Downloading base image node:10-slim          
2020/05/25 21:12:39 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0000] cmd: EXPOSE                                  
[36mINFO[0m[0000] Adding exposed port: 4000/tcp                
[36mINFO[0m[0000] Using files from context: [/workspace/source/package-lock.json /workspace/source/package.json] 
[36mINFO[0m[0000] Checking for cached layer docker.io/todo/cache:82907ada3deea273c6d4940d414157ad40b0ce98f9ad74f5c56be6474579d155... 
2020/05/25 21:12:39 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0000] No cached layer found for cmd RUN npm install --production 
[36mINFO[0m[0000] Unpacking rootfs as cmd RUN npm install --production requires it. 
[36mINFO[0m[0004] Taking snapshot of full filesystem...        
[36mINFO[0m[0008] ENV PORT 4000                                
[36mINFO[0m[0008] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0008] EXPOSE 4000                                  
[36mINFO[0m[0008] cmd: EXPOSE                                  
[36mINFO[0m[0008] Adding exposed port: 4000/tcp                
[36mINFO[0m[0008] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0008] WORKDIR /usr/src/app                         
[36mINFO[0m[0008] cmd: workdir                                 
[36mINFO[0m[0008] Changed working directory to /usr/src/app    
[36mINFO[0m[0008] Creating directory /usr/src/app              
[36mINFO[0m[0008] Taking snapshot of files...                  
[36mINFO[0m[0008] ENV  NODE_ENV production                     
[36mINFO[0m[0008] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0008] Using files from context: [/workspace/source/package-lock.json /workspace/source/package.json] 
[36mINFO[0m[0008] COPY package-lock.json package.json ./       
[36mINFO[0m[0008] Taking snapshot of files...                  
[36mINFO[0m[0008] RUN npm install --production                 
[36mINFO[0m[0008] cmd: /bin/sh                                 
[36mINFO[0m[0008] args: [-c npm install --production]          

> chromedriver@81.0.0 install /usr/src/app/node_modules/chromedriver
> node install.js

Current existing ChromeDriver binary is unavailable, proceeding with download and extraction.
Downloading from file:  https://chromedriver.storage.googleapis.com/81.0.4044.69/chromedriver_linux64.zip
Saving to file: /tmp/81.0.4044.69/chromedriver/chromedriver_linux64.zip
Received 1040K...
Received 2080K...
Received 3120K...
Received 4160K...
Received 4840K total.
Extracting zip contents.
Copying to target path /usr/src/app/node_modules/chromedriver/lib/chromedriver
Fixing file permissions.
Done. ChromeDriver binary available at /usr/src/app/node_modules/chromedriver/lib/chromedriver/chromedriver

> core-js@3.6.5 postinstall /usr/src/app/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e)**"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m


> @apollo/protobufjs@1.0.3 postinstall /usr/src/app/node_modules/@apollo/protobufjs
> node scripts/postinstall

npm WARN api@1.0.0 No repository field.

added 292 packages from 287 contributors and audited 890 packages in 11.037s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

[36mINFO[0m[0020] Taking snapshot of full filesystem...        
[36mINFO[0m[0026] Pushing layer docker.io/todo/cache:82907ada3deea273c6d4940d414157ad40b0ce98f9ad74f5c56be6474579d155 to cache now 
[36mINFO[0m[0026] Using files from context: [/workspace/source/dist] 
[36mINFO[0m[0026] COPY dist/ .                                 
[36mINFO[0m[0026] Taking snapshot of files...                  
[36mINFO[0m[0026] CMD ["node", "server.js"]                    
[36mINFO[0m[0026] No files changed in this command, skipping snapshotting. 
[33mWARN[0m[0026] error uploading layer to cache: failed to push to destination index.docker.io/todo/cache:82907ada3deea273c6d4940d414157ad40b0ce98f9ad74f5c56be6474579d155: unsupported status code 401; body:  
2020/05/25 21:13:06 existing blob: sha256:faf966cc3d4389d53e5d7058d3fec5e26f64ca17ae27c83e14e998014c3866d0
2020/05/25 21:13:06 existing blob: sha256:046339b6eb6f90a55c7687320b4bd4ee50f8f2548d1ade73cc03d025341fe579
2020/05/25 21:13:06 existing blob: sha256:a47967f38a3af593c6410d12c25300369c8166d7eb1415f71b7f36469ba1ca37
2020/05/25 21:13:06 existing blob: sha256:ddfd54cf93ea64aadbc3c93b890234a87754e2a5a9418525df790ab89b1ffd84
2020/05/25 21:13:06 existing blob: sha256:e62d08fa1eb18131b4109c7cbece97f4f7e37d6ea09845a21beb3a899d0c963d
error pushing image: failed to push to destination index.docker.io/beethub/api:0.0.17: UNAUTHORIZED: authentication required; [map[Class: Name:beethub/api Action:pull Type:repository] map[Type:repository Class: Name:beethub/api Action:push]]
[31m
Pipeline failed on stage 'from-build-pack' : container 'step-build-container-build-ts'. The execution of the pipeline has stopped.[0m
